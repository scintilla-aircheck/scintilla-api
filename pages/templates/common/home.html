{% extends 'base.html' %}
{% load staticfiles %}

{% block extra_head %}
{% endblock %}

{% block content %}
<div id="header">
    <div id="header_logo">Scintilla</div>
    <div id="header_links_container">
        <a href="" class="header_link">
            Buy
        </a>
    </div>
</div>
<div id="home_container">
    <div id="home_top_section" class="section">
        <div id="home_top_section_content">
            <div id="home_top_section_title">
                Scintilla
            </div>
            <div id="home_top_section_tagline">
                "Bring air quality data into the 21st century."
            </div>
        </div>
    </div>
    <div id="home_nasa_section" class="section">
        <div id="home_nasa_section_content">
            <div id="home_nasa_section_text">
                Global Finalists of the 2016 NASA Space Apps Challenge for "Project Scintilla"
            </div>
            <div id="home_nasa_section_space_apps_challenge_container">
                <div id="home_nasa_section_space_apps_challenge_logo">
                    <img src="" />
                </div>
                <a href="https://2016.spaceappschallenge.org/challenges/earth/aircheck/projects/scintilla" id="home_nasa_section_space_apps_challenge_link">
                    Scintilla Project Page
                </a>
            </div>
        </div>
    </div>
    <div id="home_how_it_works_section" class="section">
        <div id="home_how_it_works_section_content">
            <div class="home_how_it_works_section_column">
                <div class="home_how_it_works_section_column_text">
                    Easily deploy one or many air quality monitoring outposts...
                </div>
                <div class="home_how_it_works_section_column_image">
                    <img src="" />
                </div>
            </div>
            <div class="home_how_it_works_section_column">
                <div class="home_how_it_works_section_column_text">
                    ...and see all the data in our beautiful but powerful dashboard
                </div>
                <div class="home_how_it_works_section_column_image">
                    <img src="" />
                </div>
            </div>
        </div>
    </div>
    <div id="home_use_cases_section" class="section">
        <div id="home_use_cases_section_content">
            <div id="home_use_cases_section_title">
                Great for:
            </div>
            <div id="home_use_cases_section_columns_container">
                <div class="home_use_cases_section_column">
                    <div class="home_use_cases_section_column_title">
                         Compliance
                    </div>
                    <div class="home_use_cases_section_column_text">
                        Download reports. Support open during business hours.
                    </div>
                </div>
                <div class="home_use_cases_section_column">
                    <div class="home_use_cases_section_column_title">
                        Home
                    </div>
                    <div class="home_use_cases_section_column_text">
                        If you'd prefer not to have a gimmicky second-rate sensor.
                    </div>
                </div>
                <div class="home_use_cases_section_column">
                    <div class="home_use_cases_section_column_title">
                        Science
                    </div>
                    <div class="home_use_cases_section_column_text">
                        Download in standard science data formats. Open API usable with other sensors.
                        <a href="https://github.com/scintilla-aircheck/">Open source</a>.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="footer">

</div>

<section>
            <p>Hi ðŸ™‚,</p>
            <p>This is a little demo of how you can get Django Channels to work with Docker. For details
                please take a took at the README.md file that comes with this project.</p>
            <p>This page should give you a small demo of Websockets in Channels. For a better experience,
                open this page within two browser windows side-by-side ðŸ˜‰</p>
            <p>Type something in the form below and you should see it appearing in every open window.</p>
        </section>
        <ul style="float: right; width: 49%; margin: 0; padding: 0">
            <li>Nothing here yet...</li>
        </ul>
        <form method="POST" style="float: left; width: 50%">
            <input type="text" placeholder="Enter some text here and hit ENTER..." style="min-width: 500px">
        </form>
        <script>
            (function() {
                // Let's open a little websocket connection to the backend server
                var socket = null;
                function createSocket() {
                    socket = new WebSocket('ws://' + window.location.host + '/socket');
                    if (socket) {
                        socket.onmessage = function(e) {
                            var newLine = document.createElement('li');
                            var previousFirst = document.querySelector('li');
                            newLine.innerText = e.data;
                            document.querySelector('ul').insertBefore(newLine, previousFirst);
                        };
                        // When the backend reloads, the connection will be lost.
                        // This will reopen it after a bit of a cooldown period.
                        socket.onclose = function(e) {
                            if (e.code === 1006) {
                                window.setTimeout(createSocket, 2000);
                            }
                        };
                    }
                }
                createSocket();

                // Now let's create our end of the chat window:
                var form = document.querySelector('form');
                var input = document.querySelector('input');
                form.addEventListener('submit', function(evt) {
                    evt.preventDefault();
                    socket.send(input.value);
                    input.value = "";
                }, false);
            })();
        </script>
{% endblock %}
